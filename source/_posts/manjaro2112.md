---
title: Manjaro ARM 21.12 测评
date: 2021-12-30 15:12:47
tags:
- R3300-M
- AARCH64
- Manjaro
---
Manjaro ARM 21.12 已发布了一段时间，照例测试了VIM2镜像。除了软件包例行更新外，引导方式发生了重大改变。在21.10及之前版本中，系统启动顺序为 **BSP U-BOOT** - **Mainline U-BOOT** - **Linux Kernel** ，21.12抛弃了 **Mainline U-BOOT** ，由 **BSP U-BOOT** 直接加载 **Linux Kernel** 。

理论上此次改动缩短了启动流程，项目维护成本更小。不过实际测试来看，取消 **Mainline U-BOOT** 后，系统暴露出一些问题：

1. **HDMI** 无输出。并非在全部场景下均无输出，系统刚上电时接通显示器，HDMI输出正常。如果在系统完全启动后再连接显示器，HDMI无任何输出。
2. 关机重启异常。测试了Mainline、Odroid、khadas内核，执行关机或重启命令后系统均为进入僵死状态，只能通过断电恢复。

问题1对于无头服务器影响轻微，即便是第一次开机初始化配置也可以通过SSH远程完成，完成初始化配置前root用户无密码可远程登录。

问题2只要不频繁重启主机影响也不大。除了更新内核外，必须重启的场景不多。关机基本不存在的，低功耗零噪音7X24开机运行无压力。

值得一提的是，放弃主线内核后，有线网卡MAC地址不会每次重启后变化了，所以不再需要用nmtui提供的mac address clone功能固定地址。

当然对于需要从低版本更新到21.12的盒子，还是建议在 **/etc/pacman.conf** 中，将 **boot-vim2** 添加到 **IgnorePkg** 中。直接更新 **boot-vim2** 会干掉 **Image**，而且不会更新启动配置文件，稳妥起见不要乱折腾为宜。
